<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CQ</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.css">

<link rel="stylesheet" type="text/css" href="/css/navBar.css">
<link rel="stylesheet" type="text/css" href="/css/sidebar.css">

<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.js"></script>

<% include paritials/topbar.ejs %>
<% include paritials/sidebar.ejs %>

<center>
<div class="container" style="height:750px;margin-top: 90px">
  <div class="col-sm-6" style="background-color:#fff;border:5px solid rgba(0,0,0,0.1); vertical-align: baseline;text-align: center;">
    <br>
    <h1>Change Password</h1>
    <div class="col-sm-12">
      <div class="form-group">
        <label>Old Password:</label>
        <input type="password" name="oldPassword" class="form-control" id="old" required><br/>
      </div>
      <div class="form-group">
        <label>New Password:</label>
        <input type="password" name="newPassword" class="form-control" id="new" required><br/>
      </div>
      <div class="form-group">
        <input id="submit" type="submit" value="Submit" class="btn btn-success">
      </div>
    </div>
  </div>
</div>
</center>
<script type="text/javascript">
document.getElementById("submit").addEventListener("click",function(event)
{
  var oldpassword=document.getElementById("old");
  var newpassword=document.getElementById("new");
  if(oldpassword.value=="" || newpassword.value=="")
    alert("Please Enter Value");
  else
  {
    var ob=new Object();
    ob.oldpass=oldpassword.value;
    ob.newpass=newpassword.value;
    var xhr=new XMLHttpRequest();
    xhr.open("POST","/userTable/changePassword");
    xhr.setRequestHeader("Content-Type","application/json");
    xhr.send(JSON.stringify(ob));
    xhr.addEventListener("load",function(event)
    {
      console.log(xhr.responseText);
      if(xhr.responseText=="false")
        alert("Incorrect old password");
      else
        alert("Password Changed Successfully");
    });
  }
});
</script>